<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Successful - SnackAttack</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>SnackAttack</h1>
        <p>Your favorite Indian restaurant - Order online now!</p>
    </header>

    <main>
        <section id="success-message">
            <h2>Order Placed Successfully!</h2>
            <p>Thank you for your order. Your delicious Indian food will be prepared shortly.</p>
            <p>You will receive a confirmation message on your phone.</p>
            <div id="order-details" style="display: none;">
                <h3>Order Details:</h3>
                <div id="order-items"></div>
                <p><strong>Total: ₹<span id="order-total">0</span></strong></p>
                <h3>Customer Information:</h3>
                <p>Name: <span id="customer-name"></span></p>
                <p>Phone: <span id="customer-phone"></span></p>
                <p>Address: <span id="customer-address"></span></p>
            </div>
            <button onclick="window.location.href='index.html'">Place New Order</button>
        </section>
    </main>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('http://localhost:3001/api/orders')
                .then(response => response.json())
                .then(orders => {
                    if (orders.length > 0) {
                        const data = orders[orders.length - 1]; // Get the last order
                        document.getElementById('order-details').style.display = 'block';
                        let itemsHtml = '';
                        data.order.forEach(item => {
                            itemsHtml += `<p>${item.name} (x${item.quantity}) - ₹${item.price * item.quantity}</p>`;
                        });
                        document.getElementById('order-items').innerHTML = itemsHtml;
                        document.getElementById('order-total').textContent = data.total;
                        document.getElementById('customer-name').textContent = data.name;
                        document.getElementById('customer-phone').textContent = data.phone;
                        document.getElementById('customer-address').textContent = data.address;
                    }
                })
                .catch(error => {
                    console.error('Error fetching orders:', error);
                });
        });
    </script>
</body>
</html>
